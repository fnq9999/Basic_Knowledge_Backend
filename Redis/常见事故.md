常见事故
=======

### 从挂导致主挂
- 重试太多，导致主从同步压力过大，从无法跟上主，从而从无法对外提供服务，
这样读请求都到了主，从而主CPU打满，主挂了
  
### 反复重建Zset导致稳定性下降

### proxy
- 摘除导致雪崩
- 升级之后，对于hot k 处理不一致，流量达到server ，使得proxy CPU up

### 每个业务单独实例的好处
- 分开的话，减少实例的QPS，服务更加稳定
- 因为单线程处理模型，分开延时更小
- 业务影响隔离开，不会因为某个业务的不当使用，影响其他业务
- 某台实例挂掉之后，恢复也相对更快

### 缓存雪崩
- 背景:击穿的增强版，击穿是一个K失效，雪崩是多个k失效
- 解决
    - 随机TTL，防止都在同一时间过期
    - 熔断，限流，流量超过一定阈值，直接返回
    - 分库分表读写分离  
    - redis集群，增强容灾性